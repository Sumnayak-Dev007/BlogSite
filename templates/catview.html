{% extends 'base.html' %}
{% load static %}
{% load tz %}
{% load crispy_forms_tags %}
{% block content %}

  <!-- Main -->
<!-- Main -->
<div class="flex-1 p-6 bg-gray-900 min-h-screen transition-colors duration-300">
  <div class="flex flex-col md:flex-row gap-8 justify-center">

    <!-- Blog Posts -->
    <div class="w-full max-w-3xl mx-auto">  <!-- ðŸ‘ˆ restricts width & centers -->
      <h2 class="text-2xl font-bold my-6 flex justify-between items-center text-gray-800 dark:text-gray-100">
        Latest Blog Posts
        <button type="button"
          class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg shadow transition-transform hover:scale-105"
          onclick="openModal()">
          Create a Blog
        </button>
      </h2>

      <!-- Example Post -->
      {% for c in posts %}
      <div class="bg-gray-800 p-6 rounded-lg shadow-md mb-8 fade-in transition-colors duration-300">
        <div class="flex flex-col md:flex-row">
          <div class="md:w-1/3 h-48 bg-cover bg-center rounded" style="background-image: url('{{ c.blog_image.url }}');"></div>
          <div class="md:w-2/3 md:pl-6 mt-4 md:mt-0">
            <h3 class="text-xl font-bold mb-2 text-white">{{ c.name }}</h3>
            <p class="text-gray-300">{{ c.descriptions }}</p>
            <div class="text-gray-400 mb-4 flex items-center space-x-4">
              <i class="fas fa-calendar-alt"></i>
              <a href="{% url 'blog_view' c.category.slug c.slug %}" class="hover:text-blue-500"><i class="fas fa-folder"></i> View</a>
              <span><i class="fas fa-comment"></i> Comments</span>
            </div>
            <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline">Read More <i
                class="fas fa-arrow-right ml-2"></i></a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>


<!-- Modal -->
<div id="exampleModal"
  class="fixed inset-0 z-50 hidden flex justify-center items-center bg-black bg-opacity-50 transition-colors duration-300">
  <div class="bg-gray-800 rounded-lg shadow-lg max-w-lg w-full transition-colors duration-300">
    <div class="flex justify-between items-center p-4 border-b border-gray-700">
      <h1 class="text-lg font-semibold text-gray-100">Create Your Blog</h1>
      <button type="button" class="text-gray-500 hover:text-gray-300 text-3xl"
        onclick="closeModal()">&times;</button>
    </div>
    <form method="POST" enctype="multipart/form-data" class="p-4">
      {% csrf_token %}
      {{ form|crispy }}
      <div class="flex justify-end border-t pt-4 border-gray-700">
        <button type="button"
          class="bg-gray-600 text-gray-200  font-bold py-2 px-4 rounded mr-2"
          onclick="closeModal()">Close</button>
        <button type="submit"
          class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">Save changes</button>
      </div>
    </form>
  </div>
</div>

<!-- JS -->
<script>
  function openModal() { document.getElementById('exampleModal').classList.remove('hidden'); }
  function closeModal() { document.getElementById('exampleModal').classList.add('hidden'); }

  // Fade-in on scroll
  document.addEventListener("DOMContentLoaded", () => {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });
    document.querySelectorAll(".fade-in").forEach(el => observer.observe(el));
  });
</script>

{% endblock %}
